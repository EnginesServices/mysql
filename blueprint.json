{
  "title": "mysql server",
  "description": "mysql",
  "memory_usage": {
    "required": 456,
    "recommended": 456
  },
  "licenses": [
  ],
  "consumers": [
    "ManagedEngine",
    "ManagedService"
  ],
  "binding_anchor": {
    "variables": {
      "flavor": "mysql2",
      "host": "^^identifier^^.^^universe.host^^",
      "name": "^^identifier^^",
      "username": "^^identifier^^_user",
      "password": "^^random(10)^^",
      "collation": "utf8_general_ci",
      "full_access": "0",
      "backup_support": true
    }
  },
  "service_configurations": [
    {
      "type_path": "log_rotate",
      "variables": {
        "log_name": "myqsl_error_log",
        "log_file_path": "/services/mysqld/mysql/error.log",
        "cycle": "daily",
        "rotate": "12"
      }
    }
  ],
  "stages": [
    {
      "starter": {
        "image": "engines/servicebase",
        "tag": "current"
      },
      "state": {
        "type_path": "database/sql/mysql",
        "service_handle_field": "database_name",
        "deployment_type": "worker",
        "set_state": "running",
        "default_stop_timeout": 0,
        "restart_policy": "unless-stopped",
        "restart_attempts": 0
      },
      "disposition": [
        "persistent",
        "shareable",
        "consumer_exportable"
      ],
      "os_packages": [
        {
          "name": "mysql-server"
        },
        {
          "name": "mysql-client"
        }
      ],
      "log_directories": [
        "/var/log/mysql"
      ],
      "file_permissions": [
        {
          "path": "/var/run/mysqld/",
          "recursive": false,
          "permissions": "700",
          "create": "dir"
        }
      ]
    }
  ],
  "constants": [
    {
      "name": "rails_flavor",
      "value": "mysql2"
    },
    {
      "name": "backup_support",
      "value": "true"
    },
    {
      "name": "db_flavor",
      "value": "mysql2"
    }
  ]
}
